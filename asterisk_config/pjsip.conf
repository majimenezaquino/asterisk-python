;-------------------------------- PrivateDial ----------------------------------
; Filename: pjsip.conf
; This file is an Asterisk configuration file, part of the PrivateDial suite.
; It is loaded by the chan_pjsip.so module.
;

;-------------------------------- global ---------------------------------------

[global]
type = global
user_agent = Platform PBX

;-------------------------------- includes -------------------------------------

#tryinclude pjsip_transport.conf
; Definir el transporte que se usará para las conexiones SIP.
; En este caso, utilizamos UDP y configuramos Asterisk para escuchar en el puerto 5060 en todas las interfaces.
[transport-udp]
type=transport               ; Tipo de objeto (transporte).
protocol=udp                 ; El protocolo de transporte (UDP).
bind=0.0.0.0:5060            ; Dirección y puerto en los que Asterisk escucha para conexiones SIP.

; Configuración de registro para el trunk SIP saliente.
[outbound-trunk]
type=registration            ; Tipo de objeto (registro de SIP).
outbound_auth=auth_outbound_trunk ; Referencia a la autenticación que usará para registrarse en el proveedor SIP.
server_uri=sip:ogtic-1b956a4de4db.sip.signalwire.com ; La URI del servidor del proveedor SIP.
client_uri=sip:jmecatroni@ogtic-1b956a4de4db.sip.signalwire.com ; URI del cliente (nuestro Asterisk).
retry_interval=60            ; Intervalo de reintento en segundos si falla el registro.
forbidden_retry_interval=600 ; Tiempo de espera en segundos si el registro es rechazado.
expiration=3600              ; Tiempo de expiración del registro en segundos (1 hora).
auth_rejection_permanent=no   ; Si la autenticación falla, continuar reintentando.

; Configuración de autenticación para el trunk SIP.
[auth_outbound_trunk]
type=auth                    ; Tipo de objeto (autenticación).
auth_type=userpass           ; Tipo de autenticación, basado en nombre de usuario y contraseña.
username=jmecatroni          ; Nombre de usuario proporcionado por el proveedor SIP.
password=Mja25192519.        ; Contraseña proporcionada por el proveedor SIP.

; Configuración del endpoint para realizar llamadas usando el trunk SIP.
[outbound_trunk_endpoint]
type=endpoint                ; Tipo de objeto (endpoint).
transport=transport-udp      ; Usamos el transporte definido previamente (UDP).
context=from-trunk           ; Contexto donde las llamadas entrantes desde el trunk serán procesadas.
disallow=all                 ; Deshabilitar todos los códecs por defecto.
allow=ulaw                   ; Permitir el códec ulaw (G.711).
outbound_auth=auth_outbound_trunk ; Referencia a la autenticación que se usará para el endpoint.
aors=outbound_trunk_aor      ; Referencia a la configuración del AOR (Address of Record).

; Definir la configuración del AOR (Address of Record), que especifica la URI del servidor SIP.
[outbound_trunk_aor]
type=aor                     ; Tipo de objeto (AOR).
contact=sip:ogtic-1b956a4de4db.sip.signalwire.com  ; URI del servidor SIP donde se realizarán las llamadas.
